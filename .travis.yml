sudo: false

cache:
  - ccache
  - pip

dist: xenial

language: generic

addons:
  apt:
    update: true
    packages:
      - ccache

before_install:
  - export PATH=/usr/lib/ccache:$PATH
  - make lint

install:
  - make install

script:
  - make test

  - |
    mkdir -p ~/ros_morefusion/src
    ln -s $TRAVIS_BUILD_DIR ~/ros_morefusion/src/morefusion
    cd ~/ros_morefusion
    ln -s src/morefusion/ros/*sh .
    ./rosdep_install.sh
    ./catkin_build.robot_agent.sh

branches:
  only:
    - master

notifications:
  email: false
